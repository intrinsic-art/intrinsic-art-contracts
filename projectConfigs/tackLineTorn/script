class Random{constructor(){this.useA=!1;let e=function(e){let o=parseInt(e.substring(0,8),16),n=parseInt(e.substring(8,16),16),a=parseInt(e.substring(16,24),16),t=parseInt(e.substring(24,32),16);return function(){o|=0,n|=0,a|=0,t|=0;let e=(o+n|0)+t|0;return t=t+1|0,o=n^n>>>9,n=a+(a<<3)|0,a=a<<21|a>>>11,a=a+e|0,(e>>>0)/4294967296}};this.prngA=new e(seedText.substring(2,34)),this.prngB=new e(seedText.substring(34,66));for(let e=0;e<1e6;e+=2)this.prngA(),this.prngB()}random_dec(){return this.useA=!this.useA,this.useA?this.prngA():this.prngB()}random_num(e,o){return e+(o-e)*this.random_dec()}random_int(e,o){return Math.floor(this.random_num(e,o+1))}random_bool(e){return this.random_dec()<e}random_choice(e){return e[this.random_int(0,e.length-1)]}}let imageDimension,referenceRatio,referenceDimension,canvas,output,scaledOutput,colorCategory,colorScheme,colorSchemes,scaledDimension=6e3,scaleFactor=1,colors=[],seedText=artwork.seed,seed=parseInt(seedText.slice(0,16),16),R1=new Random,R2=new Random,R3=new Random,R4=new Random,R5=new Random,R6=new Random,R7=new Random,R8=new Random,R9=new Random,Palette=artwork.traits.palette,Force=artwork.traits.force,Status=artwork.traits.status;function setup(){pixelDensity(1),referenceDimension=1600,imageDimension=Math.min(windowWidth,windowHeight),scaleFactor=scaledDimension/imageDimension,referenceRatio=imageDimension/referenceDimension,console.log("referenceDimension:"+referenceDimension),console.log("referenceRatio:"+referenceRatio),colorSchemeNames=["square","square","tetradic","tetradic","hexadic","analogous_split"],colorScheme=colorSchemeNames[R1.random_int(0,colorSchemeNames.length-1)],console.log("colorSceheme: "+colorScheme),colorMode(HSB,360,100,100,100),colors=generatePalette(Palette),canvas=createCanvas(imageDimension,imageDimension),output=createGraphics(imageDimension,imageDimension),scaledOutput=createGraphics(scaledDimension,scaledDimension),getArt()}function getArt(){let e,o,n,a,t,r,s,m,u,c=R1.random_int(3,8),i=R1.random_int(3,8),d=R1.random_int(1,2),l=.3,R=R1.random_int(800,1600),p=R1.random_num(0,1)<.75;switch(console.log("ribbonLength:"+R),Force){case"Breeze":s=R1.random_int(5,9);break;case"Gust":s=R1.random_int(16,24),l*=.8;break;case"Gale":s=R1.random_int(40,60),l*=.5}output.clear(),scaledOutput.clear(),output.colorMode(HSB,360,100,100,100),scaledOutput.colorMode(HSB,360,100,100,100),output.push(),scaledOutput.push(),scaledOutput.scale(scaleFactor);let _=colors[0].color,h=-30*R1.random_int(0,1)+15,g=color((hue(_)+360+h)%360,saturation(_),brightness(_),100);output.background(g),scaledOutput.background(g),console.log("base hue: "+hue(g)),console.log("base saturation: "+saturation(g)),console.log("base brightness: "+brightness(g)),console.log("base alpha: "+alpha(g)),console.log("orderedFactor: "+d),console.log("maxNumRibbons: "+s),o=R1.random_num(-1,1),R1.random_num(0,1)<.2&&(o=R6.random_num(-.03,.03)),n=R1.random_num(-.5,.5),a=R1.random_num(-1,1)*referenceRatio,t=R1.random_num(-1,1)*referenceRatio,e=R1.random_num(.05,.8)*imageDimension,r=0,output.colorMode(HSB,360,100,100,100),scaledOutput.colorMode(HSB,360,100,100,100);for(let _=0;_<s;_++){let s=R7.random_num(l,1-l),h=R7.random_num(l,1-l),g=R7.random_num(0,1);switch(output.push(),scaledOutput.push(),output.angleMode(DEGREES),scaledOutput.angleMode(DEGREES),m=_>0?colors[R7.random_int(0,colors.length-1)]:colors[colors.length-1],output.stroke(m.color),scaledOutput.stroke(m.color),output.strokeWeight(.001*imageDimension),scaledOutput.strokeWeight(.001*imageDimension),Status){case"Riven":o=R8.random_num(-1,1),g<.1&&(o=R9.random_num(-.02,.02)),n=R8.random_num(-.5,.5),a=R8.random_num(-1,1)*referenceRatio,t=R8.random_num(-1,1)*referenceRatio,e=R8.random_num(.05,.8)*imageDimension,p=R1.random_num(0,1)<.05,r=50*Math.pow(R8.random_num(.1,1),8);break;case"Docked":e=R8.random_num(.05,.8)*imageDimension;break;case"Adrift":o=R8.random_num(-1,1),g<.1&&(o=R9.random_num(-.02,.02)),n=R8.random_num(-.5,.5),a=R8.random_num(-1,1)*referenceRatio,t=R8.random_num(-1,1)*referenceRatio,e=R8.random_num(.05,.8)*imageDimension,p=R1.random_num(0,1)<.05}switch(Force){case"Breeze":e*=R8.random_num(2,4);break;case"Gust":e*=R8.random_num(1,2);break;case"Gale":e*=R8.random_num(.5,1)}u=Math.abs(o)>Math.abs(n)?o/n:n/o,u>0&&u<4&&p&&(n*=-1);let b=s*imageDimension,D=h*imageDimension;if("Docked"==Status){let e=(1-2*l)*imageDimension;b=l*imageDimension+R8.random_int(0,c)*e/c,D=l*imageDimension+R8.random_int(0,i)*e/i,output.translate(b,D),scaledOutput.translate(b,D),output.rotate(360/d*R8.random_int(0,d-1)),scaledOutput.rotate(360/d*R8.random_int(0,d-1))}else output.translate(b+(2*R8.random_dec()-1)*Math.pow(R8.random_dec(),3)*.1,D+(2*R8.random_dec()-1)*Math.pow(R8.random_dec(),3)*.1),scaledOutput.translate(b+(2*R8.random_dec()-1)*Math.pow(R8.random_dec(),3)*.1,D+(2*R8.random_dec()-1)*Math.pow(R8.random_dec(),3)*.1);let f,k,w=0;for(let s=0;s<R;s++)output.push(),scaledOutput.push(),w=r>0?(3*noise(.8*s)-1)*e:0,output.rotate(s*o),scaledOutput.rotate(s*o),output.line(0,0,0,e+w),scaledOutput.line(0,0,0,e+w),output.pop(),scaledOutput.pop(),output.rotate(n),scaledOutput.rotate(n),f=R8.random_num(1-r,1+r),k=R8.random_num(1-r,1+r),output.translate(a*f,t*k),scaledOutput.translate(a*f,t*k);output.pop(),scaledOutput.pop()}output.pop(),scaledOutput.pop(),image(output,0,0)}function generatePalette(e){let o,n,a,t,r,s,m=[],u=R1.random_num(0,360),c=[];switch(e){case"DawnWhisper":u=R5.random_num(330,440)%360;break;case"TempestSurge":u=R6.random_num(180,330)}switch(colorScheme){case"monochromatic":c=Array(5).fill(u);break;case"analogous":o=R2.random_int(4,8);for(let e=0;e<o;e++)c.push((u+e*R3.random_num(10,20))%360);break;case"analogous_split":o=R2.random_int(4,7);for(let e=0;e<o;e++)c.push((u+12*e)%360);c[c.length-1]=(c[0]+300)%360;break;case"complementary":c=[u,(u+180)%360];break;case"splitComplementary":c=[u,(u+150)%360,(u+210)%360];break;case"triadic":c=[u,(u+120)%360,(u+240)%360];break;case"square":c=[u,(u+90)%360,(u+180)%360,(u+270)%360];break;case"tetradic":o="Riven"==Status&&"Breeze"==Force?3:R9.random_int(3,5);for(let e=0;e<o;e++)c.push((u+72*e)%360);break;case"hexadic":o="Riven"==Status&&"Breeze"==Force?3:R9.random_int(3,6);for(let e=0;e<o;e++)c.push((u+60*e)%360)}for(let o=0;o<c.length;o++){switch(e){case"WildCompass":n=R3.random_num(40,80),a=R3.random_num(40,100),t=c[o],r=15;break;case"Aurora":n=R3.random_num(80,100),a=R3.random_num(80,100),t=(c[o]+120)%360,r=15;break;case"DawnWhisper":t=c[o],R4.random_dec()>.3?(n=R4.random_num(10,40),a=R4.random_num(95,100)):(n=R4.random_num(30,90),a=R4.random_num(95,100)),0==o&&(n=R4.random_num(10,50),a=R4.random_num(90,100)),r=15;break;case"TempestSurge":t=c[o],R4.random_dec()>.2?(n=R5.random_num(20,80),a=R5.random_num(5,55)):(n=R5.random_num(30,50),a=R5.random_num(40,70)),0==o&&(n=R5.random_num(10,80),a=R5.random_num(10,30)),r=15}m.push({color:color(t,n,a,r),hue:c[o]})}switch(e){case"TempestSurge":s=m.length-1,m[s].color=color(hue(m[s].color),R4.random_num(10,60),R4.random_num(95,100),alpha(m[s].color));break;case"DawnWhisper":s=m.length-1,m[s].color=color(hue(m[s].color),R5.random_num(40,90),R5.random_num(90,95),alpha(m[s].color))}return m}function exportHighRes(){save(scaledOutput,"TackLineTorn","png")}function keyReleased(){"s"!=key&&"S"!=key||exportHighRes()}console.log("Palette: "+Palette),console.log("Force: "+Force),console.log("Status: "+Status);